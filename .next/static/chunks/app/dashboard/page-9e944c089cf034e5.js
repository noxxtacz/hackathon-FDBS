(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{116:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(5155),a=s(2115),n=s(2619),l=s.n(n),i=s(4927),o=s(8391),c=s(8354),d=s(3014);let x={Low:"text-emerald-400 border-emerald-500/20 bg-emerald-500/10",Medium:"text-yellow-400 border-yellow-500/20 bg-yellow-500/10",High:"text-orange-400 border-orange-500/20 bg-orange-500/10",Critical:"text-red-400 border-red-500/20 bg-red-500/10"};function h(e){let t=Math.floor((Date.now()-new Date(e).getTime())/1e3);return t<60?"just now":t<3600?"".concat(Math.floor(t/60),"m ago"):t<86400?"".concat(Math.floor(t/3600),"h ago"):"".concat(Math.floor(t/86400),"d ago")}function m(e){let{label:t,value:s,icon:a,accent:n,sub:l}=e;return(0,r.jsx)(o.A,{className:"relative overflow-hidden",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium uppercase tracking-wider text-gray-500",children:t}),(0,r.jsx)("p",{className:"mt-1 text-3xl font-bold ".concat(n),children:s}),l&&(0,r.jsx)("p",{className:"mt-0.5 text-[11px] text-gray-600",children:l})]}),(0,r.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl ".concat(n," bg-white/5"),children:a})]})})}let u={shield:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"})}),alert:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),fire:(0,r.jsxs)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0112 21 8.25 8.25 0 016.038 7.048 8.287 8.287 0 009 9.6a8.983 8.983 0 013.361-6.867 8.21 8.21 0 003 2.48z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 00.495-7.467 5.99 5.99 0 00-1.925 3.546 5.974 5.974 0 01-2.133-1A3.75 3.75 0 0012 18z"})]}),trophy:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 013 3h-15a3 3 0 013-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 01-.982-3.172M9.497 14.25a7.454 7.454 0 00.981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 007.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M18.75 4.236c.982.143 1.954.317 2.916.52A6.003 6.003 0 0116.27 9.728M18.75 4.236V4.5c0 2.108-.966 3.99-2.48 5.228m0 0a6.003 6.003 0 01-5.54 0"})}),bolt:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})}),lock:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"})}),camera:(0,r.jsxs)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0z"})]}),play:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"})})};function p(e){let{href:t,icon:s,label:a,accent:n}=e;return(0,r.jsxs)(l(),{href:t,className:"group flex flex-col items-center gap-2 rounded-2xl border border-white/5 bg-white/[0.02] px-4 py-5 transition-all hover:border-white/10 hover:bg-white/[0.04]",children:[(0,r.jsx)("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl ".concat(n," bg-white/5 transition-transform group-hover:scale-110"),children:s}),(0,r.jsx)("span",{className:"text-xs font-medium text-gray-400 group-hover:text-white transition-colors",children:a})]})}function j(e){let{value:t,max:s,color:a}=e,n=s>0?Math.min(t/s*100,100):0;return(0,r.jsx)("div",{className:"h-2 w-full overflow-hidden rounded-full bg-white/5",children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-700 ".concat(a),style:{width:"".concat(n,"%")}})})}function b(){var e,t;let[s,n]=(0,a.useState)(null),[b,g]=(0,a.useState)(!0),[f,v]=(0,a.useState)(""),w=(0,a.useCallback)(async()=>{g(!0),v("");try{let t=await fetch("/api/dashboard/summary");if(401===t.status)return void v("Please log in to view your dashboard.");let s=await t.json();if(!t.ok){var e;v(null!=(e=s.error)?e:"Failed to load dashboard");return}n(s)}catch(e){v("Unable to reach the server. Try again later.")}finally{g(!1)}},[]);if((0,a.useEffect)(()=>{w()},[w]),b)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{title:"Dashboard",subtitle:"Loading your cyber-awareness overview…"}),(0,r.jsx)(c.A,{})]});if(f||!s)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{title:"Dashboard"}),(0,r.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,r.jsx)(d.A,{type:"error",message:f||"Unknown error",onDismiss:()=>v("")}),(0,r.jsx)("button",{onClick:w,className:"mt-4 w-full rounded-xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-gray-400 transition hover:bg-white/10 hover:text-white",children:"Retry"})]})]});let{phishing:y,quiz:k}=s,N=null!=(t=null==(e=k.lastSession)?void 0:e.percent)?t:0;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{title:"Welcome back".concat(s.user.name?", ".concat(s.user.name):""),subtitle:"Your cyber-awareness overview at a glance."}),(0,r.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsx)(m,{label:"Phishing Analyzed",value:y.analyzedCount,icon:u.shield,accent:"text-cyan-400",sub:"".concat(y.reportedCount," reported")}),(0,r.jsx)(m,{label:"High Risk Found",value:y.highRiskCount,icon:u.alert,accent:"text-red-400",sub:y.analyzedCount>0?"".concat(Math.round(y.highRiskCount/y.analyzedCount*100),"% of total"):void 0}),(0,r.jsx)(m,{label:"Daily Streak",value:k.dailyStreak.current,icon:u.fire,accent:"text-orange-400",sub:"Best: ".concat(k.dailyStreak.best)}),(0,r.jsx)(m,{label:"Last Quiz Score",value:k.lastSession?"".concat(N,"%"):"—",icon:u.trophy,accent:"text-purple-400",sub:k.lastSession?"".concat(k.lastSession.correct,"/").concat(k.lastSession.total," correct"):"No quizzes yet"})]}),(0,r.jsxs)("div",{className:"mt-6 grid gap-6 lg:grid-cols-3",children:[(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsxs)(o.A,{children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-white",children:"Recent Reports"}),(0,r.jsx)(l(),{href:"/reports",className:"text-xs text-cyan-400 hover:text-cyan-300 transition-colors",children:"View all →"})]}),0===y.lastReports.length?(0,r.jsx)("p",{className:"py-8 text-center text-sm text-gray-600",children:"No reports yet. Analyze a URL to get started."}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-white/5 text-[11px] font-medium uppercase tracking-wider text-gray-600",children:[(0,r.jsx)("th",{className:"pb-2 pr-4",children:"Time"}),(0,r.jsx)("th",{className:"pb-2 pr-4",children:"Domain"}),(0,r.jsx)("th",{className:"pb-2 pr-4",children:"Risk"}),(0,r.jsx)("th",{className:"pb-2 pr-4 text-right",children:"Score"}),(0,r.jsx)("th",{className:"pb-2"})]})}),(0,r.jsx)("tbody",{children:y.lastReports.map(e=>(0,r.jsxs)("tr",{className:"border-b border-white/[0.03] last:border-0",children:[(0,r.jsx)("td",{className:"py-2.5 pr-4 text-xs text-gray-500 whitespace-nowrap",children:h(e.createdAt)}),(0,r.jsx)("td",{className:"py-2.5 pr-4 font-mono text-xs text-gray-300 whitespace-nowrap",children:function(e){if(!e)return"—";try{let t=e.replace(/\[.\]/g,"."),s=new URL(t.startsWith("http")?t:"https://".concat(t)).hostname;return s.length>32?s.slice(0,29)+"…":s}catch(t){return e.length>32?e.slice(0,29)+"…":e}}(e.normalizedUrl)}),(0,r.jsx)("td",{className:"py-2.5 pr-4",children:(0,r.jsx)("span",{className:"inline-block rounded-full border px-2 py-0.5 text-[10px] font-semibold ".concat(x[e.overallRisk]),children:e.overallRisk})}),(0,r.jsx)("td",{className:"py-2.5 pr-4 text-right font-mono text-xs text-gray-400",children:e.riskScore}),(0,r.jsx)("td",{className:"py-2.5 text-right",children:(0,r.jsx)(l(),{href:"/reports",className:"text-[11px] text-cyan-500 hover:text-cyan-400 transition-colors",children:"View"})})]},e.id))})]})})]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)(o.A,{children:[(0,r.jsx)("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Daily Streak"}),(0,r.jsxs)("div",{className:"flex items-end gap-3",children:[(0,r.jsx)("span",{className:"text-4xl font-bold text-orange-400",children:k.dailyStreak.current}),(0,r.jsxs)("span",{className:"mb-1 text-xs text-gray-600",children:["/ ",k.dailyStreak.best," best"]})]}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(j,{value:k.dailyStreak.current,max:Math.max(k.dailyStreak.best,7),color:"bg-gradient-to-r from-orange-500 to-amber-400"})}),(0,r.jsx)("p",{className:"mt-2 text-[11px] text-gray-600",children:k.dailyStreak.current>0?"Keep it up — play a quiz every day!":"Start a quiz to begin your streak."})]}),(0,r.jsxs)(o.A,{children:[(0,r.jsx)("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Answer Streak"}),(0,r.jsxs)("div",{className:"flex items-end gap-3",children:[(0,r.jsx)("span",{className:"text-4xl font-bold text-purple-400",children:k.answerStreak.current}),(0,r.jsxs)("span",{className:"mb-1 text-xs text-gray-600",children:["/ ",k.answerStreak.best," best"]})]}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(j,{value:k.answerStreak.current,max:Math.max(k.answerStreak.best,10),color:"bg-gradient-to-r from-purple-500 to-fuchsia-400"})}),(0,r.jsx)("p",{className:"mt-2 text-[11px] text-gray-600",children:"Consecutive correct answers. One wrong resets it!"})]}),(0,r.jsx)(o.A,{children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl ".concat(s.vault.isUnlocked?"text-emerald-400":"text-gray-500"," bg-white/5"),children:u.lock}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-white",children:"Vault"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:s.vault.isUnlocked?"Set up & secured":"Not configured yet"})]})]})})]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:[(0,r.jsx)(p,{href:"/phishing",icon:u.shield,label:"Analyze URL",accent:"text-cyan-400"}),(0,r.jsx)(p,{href:"/phishing?mode=image",icon:u.camera,label:"Screenshot",accent:"text-blue-400"}),(0,r.jsx)(p,{href:"/quiz",icon:u.play,label:"Start Quiz",accent:"text-emerald-400"}),(0,r.jsx)(p,{href:"/vault",icon:u.lock,label:"Open Vault",accent:"text-amber-400"})]})]}),k.totalSessions>0&&(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(o.A,{children:(0,r.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-white",children:"Quiz History"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[k.totalSessions," session",1!==k.totalSessions?"s":""," completed"]})]}),k.lastSession&&(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,r.jsxs)("span",{children:["Last score:"," ",(0,r.jsxs)("span",{className:"font-semibold ".concat(k.lastSession.percent>=80?"text-emerald-400":k.lastSession.percent>=50?"text-yellow-400":"text-red-400"),children:[k.lastSession.percent,"%"]})]}),(0,r.jsx)("span",{children:h(k.lastSession.completedAt)})]}),(0,r.jsxs)(l(),{href:"/quiz",className:"inline-flex items-center gap-1.5 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-500 px-4 py-2 text-xs font-semibold text-slate-950 transition hover:brightness-110",children:[u.play,"Play Again"]})]})})})]})}},1946:(e,t,s)=>{Promise.resolve().then(s.bind(s,116))},3014:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(5155);function a(e){let{type:t,message:s,onDismiss:a}=e;return(0,r.jsxs)("div",{role:"alert",className:"flex items-center justify-between rounded-xl border px-4 py-3 text-sm animate-slide-up ".concat("success"===t?"border-emerald-500/20 bg-emerald-500/10 text-emerald-400":"border-red-500/20 bg-red-500/10 text-red-400"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["success"===t?(0,r.jsx)("svg",{className:"h-4 w-4 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,r.jsx)("svg",{className:"h-4 w-4 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:s})]}),a&&(0,r.jsx)("button",{onClick:a,className:"ml-4 opacity-60 hover:opacity-100 transition-opacity","aria-label":"Dismiss",children:(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}},4927:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(5155);function a(e){let{title:t,subtitle:s}=e;return(0,r.jsxs)("header",{className:"mb-8 animate-fade-in",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-white sm:text-4xl",children:t}),s&&(0,r.jsx)("p",{className:"mt-2 text-base text-gray-400",children:s})]})}},8354:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(5155);function a(e){let{size:t="md"}=e;return(0,r.jsxs)("div",{className:"flex items-center justify-center py-12",role:"status",children:[(0,r.jsx)("div",{className:"".concat("sm"===t?"h-5 w-5":"lg"===t?"h-12 w-12":"h-8 w-8"," animate-spin rounded-full border-2 border-white/10 border-t-cyan-400")}),(0,r.jsx)("span",{className:"sr-only",children:"Loading…"})]})}},8391:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(5155);function a(e){let{children:t,className:s="",hover:a=!1}=e;return(0,r.jsx)("div",{className:"rounded-2xl border border-white/[0.06] bg-white/[0.03] p-6 shadow-lg backdrop-blur-md transition-all duration-300 ".concat(a?"hover:scale-[1.02] hover:border-white/10 hover:bg-white/[0.05] hover:shadow-xl":""," ").concat(s),children:t})}}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=1946)),_N_E=e.O()}]);